import{A as o,B as n,C as u,F as x,G as p,H as l,I as R,Ia as Y,O as a,P as v,Q as y,V as C,X as B,Y as L,aa as D,ba as k,c as T,ca as H,da as w,h as E,ha as U,i as I,ja as q,ka as X,n as f,o as _,t as s,tb as F,u as b,vb as V,wb as A,x as g,y as m,z as M}from"./chunk-STIJKOU7.js";import{d as W}from"./chunk-YYD2Q6U2.js";var P=class i{especialistaSeleccionado;especialidadSeleccionado;sad(){console.log(this.especialidadSeleccionado)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-detalle-turno"]],inputs:{especialistaSeleccionado:"especialistaSeleccionado",especialidadSeleccionado:"especialidadSeleccionado"},standalone:!0,features:[C],decls:30,vars:2,consts:[[1,"container","mt-5"],[1,"text-center"],[1,"mb-3"],["for","especialista",1,"form-label"],["type","text","id","especialista","required","","disabled","",1,"form-control",3,"placeholder"],["for","horario",1,"form-label"],["type","text","id","horario","required","","disabled","","placeholder","",1,"form-control"],["type","time","id","horario","required","",1,"form-control"],["type","text","id","horario","required","","disabled","","placeholder","LUNES, MIERCOLES, VIERNES",1,"form-control"],["for","dia",1,"form-label"],["type","date","id","dia","required","",1,"form-control"],["type","submit",1,"btn","btn-primary","w-100",3,"click"]],template:function(e,r){e&1&&(o(0,"div",0)(1,"h3",1),a(2,"Reservar Turno"),n(),o(3,"form")(4,"div",2)(5,"label",3),a(6,"Especialista"),n(),u(7,"input",4),n(),o(8,"div",2)(9,"label",3),a(10,"Especialidades"),n(),u(11,"input",4),n(),o(12,"div",2)(13,"label",5),a(14,"Horario del Especialista"),n(),u(15,"input",6)(16,"br"),o(17,"label",5),a(18,"Horario a elegir"),n(),u(19,"input",7),n(),o(20,"div",2)(21,"label",5),a(22,"Dias Disponibles del Especialista"),n(),u(23,"input",8)(24,"br"),o(25,"label",9),a(26,"D\xEDa a elegir"),n(),u(27,"input",10),n(),o(28,"button",11),p("click",function(){return r.sad()}),a(29,"Confirmar"),n()()()),e&2&&(s(7),R("placeholder",r.especialistaSeleccionado),s(4),R("placeholder",r.especialidadSeleccionado))}})};function ie(i,t){if(i&1&&(o(0,"div")(1,"h4",13),a(2),n(),o(3,"p",14)(4,"strong"),a(5),n(),a(6),n()()),i&2){let e=l().$implicit;s(2),v(e.especialidad),s(3),v(e.paciente),s(),y(" - ",e.horario,"")}}function ne(i,t){if(i&1){let e=x();o(0,"div")(1,"button",15),p("click",function(){f(e);let c=l().$implicit,d=l();return _(d.cambiarEstado("cancelado",c.paciente))}),u(2,"i",16),a(3," Cancelar "),n()()}}function oe(i,t){if(i&1){let e=x();o(0,"div")(1,"button",17),p("click",function(){f(e);let c=l().$implicit,d=l();return _(d.cambiarEstado("cancelado",c.paciente))}),u(2,"i",16),a(3," PENDIENTE "),n()()}}function ae(i,t){if(i&1&&(o(0,"div")(1,"label"),a(2),n(),u(3,"br"),o(4,"label"),a(5),n()()),i&2){let e=l().$implicit;s(2),y("Estado: ",e.estado,""),s(3),y("Comentario: ",e.mensaje,"")}}function re(i,t){if(i&1&&(o(0,"li",10)(1,"div",11),g(2,ie,7,3,"div",12)(3,ne,4,0,"div",12)(4,oe,4,0,"div",12)(5,ae,6,2,"div",12),n()()),i&2){let e=t.$implicit;s(2),m("ngIf",e.estado!="eliminado"),s(),m("ngIf",e.estado=="aceptado"),s(),m("ngIf",e.estado=="pendiente"),s(),m("ngIf",e.estado=="cancelado"||e.estado=="eliminado")}}function se(i,t){i&1&&(o(0,"div",18)(1,"strong"),a(2,"\xA1Atenci\xF3n!"),n(),a(3," No tienes turnos disponibles. "),n())}var O=class i{constructor(t,e,r){this.turnos=t;this.userService=e;this.auth=r;this.dataNombres()}nombresEspecialistasArray=[];nombresFiltrados=[];especialidadSeleccionada="";especialista={};turnosDisponibles=[];turnoSeleccionado="";mensajeExito=!1;dataNombres(){this.auth.onAuthStateChanged(t=>{let e=t?.email;this.turnos.getTurnos().subscribe({next:r=>{this.nombresEspecialistasArray=r.filter(c=>c.paciente===e).map(c=>({paciente:c.paciente,especialista:c.especialista,especialidad:c.especialidad,horario:c.horario,estado:c.estado,mensaje:c.mensaje})),this.nombresFiltrados=[...this.nombresEspecialistasArray],console.log(this.nombresEspecialistasArray)},error:r=>{console.error("Error al obtener los turnos:",r)}})})}aplicarFiltro(){this.nombresFiltrados=this.nombresEspecialistasArray.filter(t=>(this.especialidadSeleccionada?t.especialidad.toLowerCase().includes(this.especialidadSeleccionada.toLowerCase()):!0)&&(this.especialista?t.especialista.toLowerCase().includes(this.especialista.toLowerCase()):!0))}cambiarEstado(t,e){this.turnos.ingresarEstado(t,e.paciente,e.horario)}static \u0275fac=function(e){return new(e||i)(b(A),b(V),b(Y))};static \u0275cmp=E({type:i,selectors:[["app-misturnos"]],standalone:!0,features:[C],decls:13,vars:2,consts:[[1,"container","text-center","mt-5"],[1,"mb-4"],[1,"row","justify-content-center"],[1,"col-md-6"],[1,"mb-3"],["type","text","placeholder","Buscar por Especialidad",1,"form-control"],["type","text","placeholder","Buscar por Especialista",1,"form-control"],[1,"btn","btn-primary","btn-lg","w-100"],["class","list-group-item shadow-sm mb-3 p-4",4,"ngFor","ngForOf"],["class","alert alert-warning mt-3",4,"ngIf"],[1,"list-group-item","shadow-sm","mb-3","p-4"],[1,"d-flex","justify-content-between","align-items-center"],[4,"ngIf"],[1,"text-primary","mb-1"],[1,"mb-1"],[1,"btn","btn-outline-danger","btn-sm","me-2",3,"click"],[1,"bi","bi-x-circle"],["disabled","",1,"btn","btn-outline-primary","btn-sm","me-2",3,"click"],[1,"alert","alert-warning","mt-3"]],template:function(e,r){e&1&&(o(0,"div",0)(1,"h1",1),a(2,"Buscar Turnos"),n(),o(3,"div",2)(4,"div",3)(5,"div",4),u(6,"input",5),n(),o(7,"div",4),u(8,"input",6),n(),o(9,"button",7),a(10,"Buscar"),n()()(),g(11,re,6,4,"li",8)(12,se,4,0,"div",9),n()),e&2&&(s(11),m("ngForOf",r.nombresEspecialistasArray),s(),m("ngIf",r.nombresEspecialistasArray.length===0))},dependencies:[w,D,k,F]})};var z=W(X());function ce(i,t){if(i&1){let e=x();o(0,"div",12)(1,"div",13),p("click",function(){let c=f(e).$implicit,d=l(2);return _(d.seleccionarEspecialista(c))}),o(2,"div",14)(3,"h6"),a(4),n()()()()}if(i&2){let e=t.$implicit;s(),M("background-image","url("+e.imagen+")"),s(3),v(e.nombre)}}function le(i,t){if(i&1){let e=x();o(0,"div",2),g(1,ce,5,3,"div",9),o(2,"div",10)(3,"button",11),p("click",function(){f(e);let c=l();return _(c.volverhome())}),a(4,"Volver"),n()()()}if(i&2){let e=l();s(),m("ngForOf",e.nombresEspecialistasArray)}}function de(i,t){if(i&1){let e=x();o(0,"div",17)(1,"p"),a(2),n(),o(3,"div",13),p("click",function(){f(e);let c=l().$implicit,d=l(2);return _(d.seleccionarEspecialidad(c.especialidad2))}),n()()}if(i&2){let e=l().$implicit;s(2),v(e.especialidad2),s(),M("background-image","url("+e.imgurl2+")")}}function me(i,t){if(i&1){let e=x();o(0,"div",16)(1,"div",17)(2,"p"),a(3),n(),o(4,"div",13),p("click",function(){let c=f(e).$implicit,d=l(2);return _(d.seleccionarEspecialidad(c.especialidad1))}),n()(),g(5,de,4,3,"div",18),n()}if(i&2){let e=t.$implicit;s(3),v(e.especialidad1),s(),M("background-image","url("+e.imgurl1+")"),s(),m("ngIf",e.especialidad2!="No especificada")}}function pe(i,t){if(i&1&&(o(0,"div",2),g(1,me,6,4,"div",15),n()),i&2){let e=l();s(),m("ngForOf",e.imagenesEspecilistasArray)}}function ue(i,t){if(i&1){let e=x();o(0,"div",19)(1,"h3"),a(2,"Selecciona una Fecha"),n(),o(3,"div",20)(4,"button",21),p("click",function(){f(e);let c=l();return _(c.cambiarFecha(-1))}),a(5,"\u2190"),n(),o(6,"div",22)(7,"span"),a(8),B(9,"date"),n()(),o(10,"button",21),p("click",function(){f(e);let c=l();return _(c.cambiarFecha(1))}),a(11,"\u2192"),n()()()}if(i&2){let e=l();s(8),v(L(9,1,e.fechaSeleccionada,"dd/MM/yyyy"))}}function fe(i,t){if(i&1){let e=x();o(0,"div",26)(1,"button",27),p("click",function(){let c=f(e).$implicit,d=l(2);return _(d.seleccionarTurno(c))}),a(2),n()()}if(i&2){let e=t.$implicit;s(2),y(" ",e," ")}}function _e(i,t){if(i&1&&(o(0,"div")(1,"h2",23),a(2,"Seleccione un Turno Disponible"),n(),o(3,"div",24),g(4,fe,3,1,"div",25),n()()),i&2){let e=l();s(4),m("ngForOf",e.turnosDisponibles)}}function ve(i,t){if(i&1){let e=x();o(0,"div",28)(1,"h3",29),a(2,"\xA1Turno Seleccionado!"),n(),o(3,"p"),a(4,"Profesional: "),o(5,"strong"),a(6),n()(),o(7,"p"),a(8,"Especialidad: "),o(9,"strong"),a(10),n()(),o(11,"p"),a(12,"Fecha y Hora: "),o(13,"strong"),a(14),n()(),o(15,"p"),a(16,"Dia: "),o(17,"strong"),a(18),B(19,"date"),n()(),o(20,"button",30),p("click",function(){f(e);let c=l();return _(c.confirmarturno())}),a(21,"Solicitar Turno"),n()()}if(i&2){let e=l();s(6),v(e.especialista.nombre),s(4),v(e.especialidadSeleccionada),s(4),v(e.turnoSeleccionado),s(4),v(L(19,4,e.fechaSeleccionada,"dd/MM/yyyy"))}}var j=class i{constructor(t,e,r){this.turnos=t;this.userService=e;this.router=r}fechaSeleccionada=new Date;nombresEspecialistasArray=[];nombresFiltrados=[];selectedEspecialidad="";especialidadSeleccionada="";especialidades=[];especialista={};turnosDisponibles=[];turnoSeleccionado="";mensajeExito=!1;imagenesEspecilistasArray=[];usuarioActual="";eleccion=!1;eleccion2=!1;especialistasEmail="";fechaMaxima=new Date;obtenerTurnosDisponibles(){this.especialidadSeleccionada&&this.fechaSeleccionada&&(this.turnosDisponibles=["09:00 AM","10:00 AM","11:00 AM"])}cambiarFecha(t){let e=new Date(this.fechaSeleccionada);e.setDate(e.getDate()+t),e<=this.fechaMaxima&&e>=new Date&&(this.fechaSeleccionada=e,this.generarTurnosDisponibles())}ngOnInit(){this.usuarioActual=this.userService.getUser(),this.dataNombres(),this.calcularFechaMaxima()}calcularFechaMaxima(){let t=new Date;t.setDate(t.getDate()+15),this.fechaMaxima=t}dataNombres(){this.turnos.getEspecialistas().subscribe(t=>{this.nombresEspecialistasArray=t.map(e=>({nombre:e.nombre,horario:e.horario,email:e.email,imagen:e.imagen,especialidades:Object.keys(e.especialista).filter(r=>e.especialista[r])})),this.especialidades=[...new Set(this.nombresEspecialistasArray.flatMap(e=>e.especialidades))]})}dataImagenes(){this.turnos.getImagenesEspecialdiad().subscribe(t=>{this.imagenesEspecilistasArray=t.filter(e=>e.usuario===this.especialistasEmail).map(e=>({usuario:e.usuario,especialidad1:e.especialidad1,especialidad2:e.especialidad2,imgurl1:e.imgurl1,imgurl2:e.imgurl2})),console.log(this.especialistasEmail)})}seleccionarEspecialista(t){this.eleccion=!0,this.eleccion2=!0,this.especialista=t,this.especialistasEmail=t.email,this.generarTurnosDisponibles(),this.dataImagenes()}generarTurnosDisponibles(){let t=this.especialista.horario.split("/"),e=parseInt(t[0]),r=parseInt(t[1]),c=20,d=[],S=e,h=0;for(;S<r||S===r&&h===0;){let K=S<10?`0${S}`:`${S}`,Q=h<10?`0${h}`:`${h}`;d.push(`${K}:${Q}`),h+=c,h>=60&&(h=0,S++)}this.turnosDisponibles=d}seleccionarTurno(t){let[e,r]=t.split(":"),c=new Date;if(c.setHours(parseInt(e)),c.setMinutes(parseInt(r)),c>this.fechaMaxima){alert("No se puede seleccionar un turno m\xE1s all\xE1 de 15 d\xEDas de anticipaci\xF3n.");return}this.turnoSeleccionado=t}turnoValido=!1;confirmarturno(){let t=this.fechaSeleccionada,e=`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()}`;this.turnoValido=!1,this.validarturno(this.turnoSeleccionado,e),setTimeout(()=>{this.turnoValido?(this.turnos.sendturno(this.userService.getUser(),this.especialista.nombre,this.especialidadSeleccionada,this.turnoSeleccionado,this.especialista.email,e),this.mensajeExito=!0,setTimeout(()=>{this.mensajeExito=!1,z.default.fire({title:"\xC9xito!",text:"El turno fue solicitado.",icon:"success",confirmButtonText:"Aceptar"}),this.router.navigate(["/turnoPaciente"])},2e3)):console.log("Turno ya seleccionado")},1e3)}validarturno(t,e){this.turnos.getTurnos().subscribe(r=>{r.find(d=>d.horario===t&&d.dia===e)?(z.default.fire({title:"Error!",text:"El turno ya est\xE1 reservado.",icon:"error",confirmButtonText:"Intentar de nuevo"}),console.log("El turno ya est\xE1 reservado."),this.turnoValido=!1):(console.log("El turno est\xE1 disponible."),this.turnoValido=!0)})}volverhome(){this.router.navigate(["/turnoPaciente"])}volver(){this.eleccion=!1}seleccionarEspecialidad(t){this.especialidadSeleccionada=t}static \u0275fac=function(e){return new(e||i)(b(A),b(V),b(U))};static \u0275cmp=E({type:i,selectors:[["app-solicitarturno"]],standalone:!0,features:[C],decls:11,vars:5,consts:[[1,"wrapper"],[1,"custom-container"],[1,"custom-row"],[1,"text-center","mb-5"],[1,"lead-title"],["class","custom-row",4,"ngIf"],["class","text-center",4,"ngIf"],[4,"ngIf"],["class","text-center mt-5",4,"ngIf"],["class","card-wrapper",4,"ngFor","ngForOf"],[1,"text-center","mt-3"],[1,"custom-btn",3,"click"],[1,"card-wrapper"],[1,"custom-card",3,"click"],[1,"card-overlay"],["class","especialidad-wrapper",4,"ngFor","ngForOf"],[1,"especialidad-wrapper"],[1,"especialidad-card"],["class","especialidad-card",4,"ngIf"],[1,"text-center"],[1,"d-flex","justify-content-center","align-items-center"],[1,"btn","btn-outline-secondary",3,"click"],[1,"mx-3"],[1,"text-center","mt-5","text-info"],[1,"row","justify-content-center"],["class","col-sm-6 col-md-4 col-lg-3 mb-4",4,"ngFor","ngForOf"],[1,"col-sm-6","col-md-4","col-lg-3","mb-4"],[1,"btn","btn-lg","btn-outline-primary","w-100",3,"click"],[1,"text-center","mt-5"],[1,"text-success"],[1,"custom-btn-confirm",3,"click"]],template:function(e,r){e&1&&(o(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),a(5,"Solicitar Nuevo Turno"),n()()(),g(6,le,5,1,"div",5)(7,pe,2,1,"div",5)(8,ue,12,4,"div",6)(9,_e,5,1,"div",7)(10,ve,22,7,"div",8),n()()),e&2&&(s(6),m("ngIf",!r.eleccion),s(),m("ngIf",r.especialista&&r.eleccion2),s(),m("ngIf",r.especialidadSeleccionada&&!r.turnoSeleccionado),s(),m("ngIf",r.especialidadSeleccionada&&r.turnosDisponibles.length>0),s(),m("ngIf",r.turnoSeleccionado))},dependencies:[w,D,k,H,F],styles:[".wrapper[_ngcontent-%COMP%]{padding:20px;background-color:#f9f9f9}.custom-container[_ngcontent-%COMP%]{margin:0 auto;max-width:1200px}.custom-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.lead-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#333}.card-wrapper[_ngcontent-%COMP%]{margin:15px;flex:1 0 calc(33.333% - 30px);box-sizing:border-box}.custom-card[_ngcontent-%COMP%]{position:relative;height:200px;background-size:cover;background-position:center;border-radius:8px;overflow:hidden;cursor:pointer;transition:transform .3s ease}.custom-card[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.card-overlay[_ngcontent-%COMP%]{position:absolute;bottom:0;background:#0009;color:#fff;width:100%;padding:10px;text-align:center}.custom-btn[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:10px 20px;border:none;border-radius:5px;font-size:1rem;cursor:pointer;transition:background-color .3s ease}.custom-btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}.text-highlight[_ngcontent-%COMP%]{color:#17a2b8;font-weight:700}.turno-wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px;justify-content:center}.custom-alert[_ngcontent-%COMP%]{padding:15px;background-color:#fc0;color:#333;border-radius:5px;text-align:center}"]})};var xe=[{path:"detalleturnoPaciente",component:P},{path:"misturnos",component:O},{path:"solicitarturno",component:j}],$=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=I({type:i});static \u0275inj=T({imports:[q.forChild(xe),q]})};var J=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=I({type:i});static \u0275inj=T({imports:[w,$]})};export{J as TurnosPacientesModule};
