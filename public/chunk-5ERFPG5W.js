import{A as i,Aa as W,B as m,E as x,F as f,G as d,H as $,M as a,N as P,O as _,P as L,Q as q,R as B,T as y,W as w,X as M,Xa as U,Y as C,aa as H,ab as G,ca as R,d as T,fb as z,gb as J,hb as K,i as h,j as I,kb as F,mb as D,n as g,nb as N,o as b,t as s,u as v,x as u,y as c,z as o}from"./chunk-27NG7S46.js";var A=class t{especialistaSeleccionado;especialidadSeleccionado;sad(){console.log(this.especialidadSeleccionado)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=h({type:t,selectors:[["app-detalle-turno"]],inputs:{especialistaSeleccionado:"especialistaSeleccionado",especialidadSeleccionado:"especialidadSeleccionado"},standalone:!0,features:[y],decls:30,vars:2,consts:[[1,"container","mt-5"],[1,"text-center"],[1,"mb-3"],["for","especialista",1,"form-label"],["type","text","id","especialista","required","","disabled","",1,"form-control",3,"placeholder"],["for","horario",1,"form-label"],["type","text","id","horario","required","","disabled","","placeholder","",1,"form-control"],["type","time","id","horario","required","",1,"form-control"],["type","text","id","horario","required","","disabled","","placeholder","LUNES, MIERCOLES, VIERNES",1,"form-control"],["for","dia",1,"form-label"],["type","date","id","dia","required","",1,"form-control"],["type","submit",1,"btn","btn-primary","w-100",3,"click"]],template:function(e,r){e&1&&(o(0,"div",0)(1,"h3",1),a(2,"Reservar Turno"),i(),o(3,"form")(4,"div",2)(5,"label",3),a(6,"Especialista"),i(),m(7,"input",4),i(),o(8,"div",2)(9,"label",3),a(10,"Especialidades"),i(),m(11,"input",4),i(),o(12,"div",2)(13,"label",5),a(14,"Horario del Especialista"),i(),m(15,"input",6)(16,"br"),o(17,"label",5),a(18,"Horario a elegir"),i(),m(19,"input",7),i(),o(20,"div",2)(21,"label",5),a(22,"Dias Disponibles del Especialista"),i(),m(23,"input",8)(24,"br"),o(25,"label",9),a(26,"D\xEDa a elegir"),i(),m(27,"input",10),i(),o(28,"button",11),f("click",function(){return r.sad()}),a(29,"Confirmar"),i()()()),e&2&&(s(7),$("placeholder",r.especialistaSeleccionado),s(4),$("placeholder",r.especialidadSeleccionado))}})};function ne(t,n){if(t&1&&(o(0,"div")(1,"h4",13),a(2),i(),o(3,"p",14)(4,"strong"),a(5),i(),a(6),i()()),t&2){let e=d().$implicit;s(2),P(e.especialidad),s(3),P(e.paciente),s(),_(" - ",e.horario,"")}}function oe(t,n){if(t&1){let e=x();o(0,"div")(1,"button",15),f("click",function(){g(e);let l=d().$implicit,p=d();return b(p.cambiarEstado("cancelado",l.paciente))}),m(2,"i",16),a(3," Cancelar "),i()()}}function ae(t,n){if(t&1){let e=x();o(0,"div")(1,"button",17),f("click",function(){g(e);let l=d().$implicit,p=d();return b(p.cambiarEstado("cancelado",l.paciente))}),m(2,"i",16),a(3," PENDIENTE "),i()()}}function re(t,n){if(t&1&&(o(0,"div")(1,"label"),a(2),i(),m(3,"br"),o(4,"label"),a(5),i()()),t&2){let e=d().$implicit;s(2),_("Estado: ",e.estado,""),s(3),_("Comentario: ",e.mensaje,"")}}function se(t,n){if(t&1&&(o(0,"li",10)(1,"div",11),u(2,ne,7,3,"div",12)(3,oe,4,0,"div",12)(4,ae,4,0,"div",12)(5,re,6,2,"div",12),i()()),t&2){let e=n.$implicit;s(2),c("ngIf",e.estado!="eliminado"),s(),c("ngIf",e.estado=="aceptado"),s(),c("ngIf",e.estado=="pendiente"),s(),c("ngIf",e.estado=="cancelado"||e.estado=="eliminado")}}function le(t,n){t&1&&(o(0,"div",18)(1,"strong"),a(2,"\xA1Atenci\xF3n!"),i(),a(3," No tienes turnos disponibles. "),i())}var k=class t{constructor(n,e,r){this.turnos=n;this.userService=e;this.auth=r;this.dataNombres()}nombresEspecialistasArray=[];nombresFiltrados=[];especialidadSeleccionada="";especialista={};turnosDisponibles=[];turnoSeleccionado="";mensajeExito=!1;dataNombres(){this.auth.onAuthStateChanged(n=>{let e=n?.email;this.turnos.getTurnos().subscribe({next:r=>{this.nombresEspecialistasArray=r.filter(l=>l.paciente===e).map(l=>({paciente:l.paciente,especialista:l.especialista,especialidad:l.especialidad,horario:l.horario,estado:l.estado,mensaje:l.mensaje})),this.nombresFiltrados=[...this.nombresEspecialistasArray],console.log(this.nombresEspecialistasArray)},error:r=>{console.error("Error al obtener los turnos:",r)}})})}aplicarFiltro(){this.nombresFiltrados=this.nombresEspecialistasArray.filter(n=>(this.especialidadSeleccionada?n.especialidad.toLowerCase().includes(this.especialidadSeleccionada.toLowerCase()):!0)&&(this.especialista?n.especialista.toLowerCase().includes(this.especialista.toLowerCase()):!0))}cambiarEstado(n,e){this.turnos.ingresarEstado(n,e.paciente)}static \u0275fac=function(e){return new(e||t)(v(N),v(D),v(W))};static \u0275cmp=h({type:t,selectors:[["app-misturnos"]],standalone:!0,features:[y],decls:13,vars:2,consts:[[1,"container","text-center","mt-5"],[1,"mb-4"],[1,"row","justify-content-center"],[1,"col-md-6"],[1,"mb-3"],["type","text","placeholder","Buscar por Especialidad",1,"form-control"],["type","text","placeholder","Buscar por Especialista",1,"form-control"],[1,"btn","btn-primary","btn-lg","w-100"],["class","list-group-item shadow-sm mb-3 p-4",4,"ngFor","ngForOf"],["class","alert alert-warning mt-3",4,"ngIf"],[1,"list-group-item","shadow-sm","mb-3","p-4"],[1,"d-flex","justify-content-between","align-items-center"],[4,"ngIf"],[1,"text-primary","mb-1"],[1,"mb-1"],[1,"btn","btn-outline-danger","btn-sm","me-2",3,"click"],[1,"bi","bi-x-circle"],["disabled","",1,"btn","btn-outline-primary","btn-sm","me-2",3,"click"],[1,"alert","alert-warning","mt-3"]],template:function(e,r){e&1&&(o(0,"div",0)(1,"h1",1),a(2,"Buscar Turnos"),i(),o(3,"div",2)(4,"div",3)(5,"div",4),m(6,"input",5),i(),o(7,"div",4),m(8,"input",6),i(),o(9,"button",7),a(10,"Buscar"),i()()(),u(11,se,6,4,"li",8)(12,le,4,0,"div",9),i()),e&2&&(s(11),c("ngForOf",r.nombresEspecialistasArray),s(),c("ngIf",r.nombresEspecialistasArray.length===0))},dependencies:[C,w,M,F]})};function ce(t,n){if(t&1&&(o(0,"option",11),a(1),i()),t&2){let e=n.$implicit;c("value",e),s(),_(" ",e," ")}}function me(t,n){if(t&1){let e=x();o(0,"li",15),f("click",function(){let l=g(e).$implicit,p=d(2);return b(p.seleccionarEspecialista(l))}),a(1),i()}if(t&2){let e=n.$implicit;s(),_(" ",e.nombre," ")}}function de(t,n){if(t&1&&(o(0,"div")(1,"ul",12)(2,"label",13),a(3,"Especialista"),i(),u(4,me,2,1,"li",14),i()()),t&2){let e=d();s(4),c("ngForOf",e.nombresFiltrados)}}function pe(t,n){t&1&&(o(0,"div",16)(1,"strong"),a(2,"\xA1Atenci\xF3n!"),i(),a(3," No hay especialistas disponibles para la especialidad seleccionada. "),i())}function ue(t,n){if(t&1&&(o(0,"option",11),a(1),i()),t&2){let e=n.$implicit;c("value",e),s(),_(" ",e," ")}}function fe(t,n){if(t&1){let e=x();o(0,"div")(1,"label",13),a(2,"Seleccione un turno"),i(),o(3,"select",18),B("ngModelChange",function(l){g(e);let p=d(2);return q(p.turnoSeleccionado,l)||(p.turnoSeleccionado=l),b(l)}),u(4,ue,2,2,"option",7),i()()}if(t&2){let e=d(2);s(3),L("ngModel",e.turnoSeleccionado),s(),c("ngForOf",e.turnosDisponibles)}}function _e(t,n){if(t&1&&(o(0,"div")(1,"p",19),a(2),i()()),t&2){let e=d(2);s(2),_("Turno seleccionado: ",e.turnoSeleccionado,"")}}function ve(t,n){t&1&&(o(0,"div",16)(1,"strong"),a(2,"\xA1Atenci\xF3n!"),i(),a(3," No hay turnos disponibles en el horario de este especialista. "),i())}function Se(t,n){if(t&1){let e=x();o(0,"div"),u(1,fe,5,2,"div",8)(2,_e,3,1,"div",8),o(3,"button",17),f("click",function(){g(e);let l=d();return b(l.seleccionarTurno(l.turnoSeleccionado))}),a(4,"Guardar"),i(),u(5,ve,4,0,"div",9),i()}if(t&2){let e=d();s(),c("ngIf",e.turnosDisponibles.length>0),s(),c("ngIf",e.turnoSeleccionado),s(3),c("ngIf",e.turnosDisponibles.length===0)}}function ge(t,n){t&1&&(o(0,"div",20)(1,"strong"),a(2,"\xA1\xC9xito!"),i(),a(3," El turno fue guardado correctamente. "),i())}var V=class t{constructor(n,e,r){this.turnos=n;this.userService=e;this.router=r}nombresEspecialistasArray=[];nombresFiltrados=[];selectedEspecialidad="";especialidadSeleccionada="";especialidades=[];especialista={};turnosDisponibles=[];turnoSeleccionado="";mensajeExito=!1;ngOnInit(){this.dataNombres()}dataNombres(){this.turnos.getEspecialistas().subscribe(n=>{this.nombresEspecialistasArray=n.map(e=>({nombre:e.nombre,horario:e.horario,email:e.email,especialidades:Object.keys(e.especialista).filter(r=>e.especialista[r])})),this.especialidades=[...new Set(this.nombresEspecialistasArray.flatMap(e=>e.especialidades))]})}mostrarEspecialistasPorEspecialidad(n){let e=n.target;this.especialidadSeleccionada=e?.value||"",this.nombresFiltrados=this.nombresEspecialistasArray.filter(r=>r.especialidades.includes(this.especialidadSeleccionada))}seleccionarEspecialista(n){this.especialista=n,this.generarTurnosDisponibles()}generarTurnosDisponibles(){let n=this.especialista.horario.split("/"),e=parseInt(n[0]),r=parseInt(n[1]),l=20,p=[],E=e,S=0;for(;E<r||E===r&&S===0;){let Y=E<10?`0${E}`:`${E}`,Z=S<10?`0${S}`:`${S}`;p.push(`${Y}:${Z}`),S+=l,S>=60&&(S=0,E++)}this.turnosDisponibles=p}seleccionarTurno(n){this.turnoSeleccionado=n,this.turnos.sendturno(this.userService.getUser(),this.especialista.nombre,this.especialidadSeleccionada,this.turnoSeleccionado,this.especialista.email),this.mensajeExito=!0,setTimeout(()=>{this.mensajeExito=!1,this.router.navigate(["/turnoPaciente"])},2e3)}static \u0275fac=function(e){return new(e||t)(v(N),v(D),v(H))};static \u0275cmp=h({type:t,selectors:[["app-solicitarturno"]],standalone:!0,features:[y],decls:15,vars:5,consts:[[1,"container","d-flex","justify-content-center","align-items-center","min-vh-100"],[1,"card","shadow-lg","p-4","w-50"],[1,"card-body"],[1,"form-group"],["for","especialidadSelect"],["id","especialidadSelect",1,"form-control",3,"change"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["class","alert alert-warning mt-3",4,"ngIf"],["class","alert alert-success mt-3",4,"ngIf"],[3,"value"],[1,"list-group","mt-3"],["for","turnoSelect"],["class","list-group-item",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item",3,"click"],[1,"alert","alert-warning","mt-3"],[3,"click"],["id","turnoSelect",1,"form-control",3,"ngModelChange","ngModel"],[1,"mt-3"],[1,"alert","alert-success","mt-3"]],template:function(e,r){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),a(5,"Seleccione una Especialidad"),i(),o(6,"select",5),f("change",function(p){return r.mostrarEspecialistasPorEspecialidad(p)}),o(7,"option",6),a(8,"Seleccione una Especialidad"),i(),u(9,ce,2,2,"option",7),i()(),u(10,de,5,1,"div",8)(11,pe,4,0,"div",9),m(12,"br"),u(13,Se,6,3,"div",8)(14,ge,4,0,"div",10),i()()()),e&2&&(s(9),c("ngForOf",r.especialidades),s(),c("ngIf",r.nombresFiltrados.length>0),s(),c("ngIf",r.nombresFiltrados.length===0&&r.especialidadSeleccionada),s(2),c("ngIf",r.especialista.nombre),s(),c("ngIf",r.mensajeExito))},dependencies:[C,w,M,F,J,K,z,U,G]})};var be=[{path:"detalleturnoPaciente",component:A},{path:"misturnos",component:k},{path:"solicitarturno",component:V}],O=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=I({type:t});static \u0275inj=T({imports:[R.forChild(be),R]})};var X=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=I({type:t});static \u0275inj=T({imports:[C,O]})};export{X as TurnosPacientesModule};
