import{$ as k,A as x,C as u,D as O,Db as $,F as r,Fb as N,G as o,Gb as z,H as C,Hb as te,Ib as ie,K as g,L as f,M as l,N as G,Q as s,R as h,Ra as j,S as w,U as S,V as y,W as E,X as P,_ as I,c as F,fa as D,g as M,ga as A,h as V,ia as Y,ja as T,lb as K,m as p,n as m,nb as Q,qa as J,sa as Z,sb as X,ta as se,ub as ee,v as d,w as b}from"./chunk-HBDPPYGW.js";import{e as ce,g as U}from"./chunk-RA2WU32H.js";var L=class a{especialistaSeleccionado;especialidadSeleccionado;sad(){console.log(this.especialidadSeleccionado)}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=M({type:a,selectors:[["app-detalle-turno"]],inputs:{especialistaSeleccionado:"especialistaSeleccionado",especialidadSeleccionado:"especialidadSeleccionado"},standalone:!0,features:[P],decls:30,vars:2,consts:[[1,"container","mt-5"],[1,"text-center"],[1,"mb-3"],["for","especialista",1,"form-label"],["type","text","id","especialista","required","","disabled","",1,"form-control",3,"placeholder"],["for","horario",1,"form-label"],["type","text","id","horario","required","","disabled","","placeholder","",1,"form-control"],["type","time","id","horario","required","",1,"form-control"],["type","text","id","horario","required","","disabled","","placeholder","LUNES, MIERCOLES, VIERNES",1,"form-control"],["for","dia",1,"form-label"],["type","date","id","dia","required","",1,"form-control"],["type","submit",1,"btn","btn-primary","w-100",3,"click"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"h3",1),s(2,"Reservar Turno"),o(),r(3,"form")(4,"div",2)(5,"label",3),s(6,"Especialista"),o(),C(7,"input",4),o(),r(8,"div",2)(9,"label",3),s(10,"Especialidades"),o(),C(11,"input",4),o(),r(12,"div",2)(13,"label",5),s(14,"Horario del Especialista"),o(),C(15,"input",6)(16,"br"),r(17,"label",5),s(18,"Horario a elegir"),o(),C(19,"input",7),o(),r(20,"div",2)(21,"label",5),s(22,"Dias Disponibles del Especialista"),o(),C(23,"input",8)(24,"br"),r(25,"label",9),s(26,"D\xEDa a elegir"),o(),C(27,"input",10),o(),r(28,"button",11),f("click",function(){return i.sad()}),s(29,"Confirmar"),o()()()),e&2&&(d(7),G("placeholder",i.especialistaSeleccionado),d(4),G("placeholder",i.especialidadSeleccionado))}})};function ue(a,t){if(a&1&&(r(0,"div")(1,"h4",15),s(2),o(),r(3,"p",16)(4,"strong"),s(5),o(),s(6),o(),r(7,"p"),s(8,"Estado:"),o(),r(9,"h2"),s(10),o()()),a&2){let e=l(2).$implicit,i=l();d(2),h(e.especialidad),d(3),h(e.especialista),d(),w(" - ",e.horario,""),d(4),h(i.getEstadoTurno(e.estado))}}function fe(a,t){if(a&1){let e=g();r(0,"button",17),f("click",function(){p(e);let n=l(2).$implicit,c=l();return m(c.mostrarFormularioCancelar(n))}),s(1," Cancelar "),o()}}function _e(a,t){if(a&1){let e=g();r(0,"button",18),f("click",function(){p(e);let n=l(2).$implicit,c=l();return m(c.mostrarFormularioCalificar(n))}),s(1," Calificar "),o()}}function ge(a,t){if(a&1){let e=g();r(0,"button",18),f("click",function(){p(e);let n=l(2).$implicit,c=l();return m(c.mostrarFormularioEncuesta(n))}),s(1," Encuesta "),o()}}function xe(a,t){if(a&1&&(r(0,"div",19)(1,"label",20),s(2),o(),r(3,"label",20),s(4),o()()),a&2){let e=l(2).$implicit,i=l();d(2),w("Estado: ",i.getEstadoTurno(e.estado),""),d(2),w("Comentario: ",e.comentarioPaciente,"")}}function he(a,t){if(a&1&&(r(0,"div",9),x(1,ue,11,4,"div",10),r(2,"div",11),x(3,fe,2,0,"button",12)(4,_e,2,0,"button",13)(5,ge,2,0,"button",13),o(),x(6,xe,5,2,"div",14),o()),a&2){let e=l().$implicit,i=l();d(),u("ngIf",e.estado!=="eliminado"),d(2),u("ngIf",e.estado==="aceptado"),d(),u("ngIf",e.estado==="historiaClinica"&&!i.calificar),d(),u("ngIf",i.encuesta&&e.estado==="historiaClinica"),d(),u("ngIf",e.estado==="cancelado"||e.estado==="eliminado")}}function be(a,t){if(a&1){let e=g();r(0,"div",21)(1,"h5",22),s(2,"Ingresar Encuesta"),o(),r(3,"div",23)(4,"label",24),s(5,"Atenci\xF3n del doctor:"),o(),r(6,"input",25),E("ngModelChange",function(n){p(e);let c=l().$implicit;return y(c.atencion,n)||(c.atencion=n),m(n)}),o()(),r(7,"div",23)(8,"label",26),s(9,"Tiempo de Demora:"),o(),r(10,"input",27),E("ngModelChange",function(n){p(e);let c=l().$implicit;return y(c.Demora,n)||(c.Demora=n),m(n)}),o()(),r(11,"div",23)(12,"label",28),s(13,"Limpieza del Consultorio:"),o(),r(14,"input",29),E("ngModelChange",function(n){p(e);let c=l().$implicit;return y(c.Limpieza,n)||(c.Limpieza=n),m(n)}),o()(),r(15,"button",30),f("click",function(){p(e);let n=l().$implicit,c=l();return m(c.ingresarEncuesta(n.atencion,n.Demora,n.Limpieza,n.paciente,n.doctor,n))}),s(16," Guardar Encuesta "),o(),r(17,"button",31),f("click",function(){p(e);let n=l().$implicit,c=l();return m(c.ocultarFormularioEncuesta(n))}),s(18,"Cancelar"),o()()}if(a&2){let e=l().$implicit;d(6),S("ngModel",e.atencion),d(4),S("ngModel",e.Demora),d(4),S("ngModel",e.Limpieza)}}function Ce(a,t){if(a&1){let e=g();r(0,"div",21)(1,"h5",22),s(2,"Ingresar Calificaci\xF3n:"),o(),r(3,"div",23)(4,"label",24),s(5,"Comentario:"),o(),r(6,"input",32),E("ngModelChange",function(n){p(e);let c=l().$implicit;return y(c.mensaje,n)||(c.mensaje=n),m(n)}),o()(),r(7,"button",30),f("click",function(){p(e);let n=l().$implicit,c=l();return m(c.ingresarMensajePaciente(n.mensaje,n.paciente,n.horario))}),s(8," Guardar Calificaci\xF3n "),o(),r(9,"button",31),f("click",function(){p(e);let n=l().$implicit,c=l();return m(c.ocultarFormularioCalificar(n))}),s(10,"Cancelar"),o()()}if(a&2){let e=l().$implicit;d(6),S("ngModel",e.mensaje)}}function ve(a,t){if(a&1){let e=g();r(0,"div",21)(1,"h5",22),s(2,"Ingresar Calificaci\xF3n:"),o(),r(3,"div",23)(4,"label",24),s(5,"Comentario:"),o(),r(6,"input",32),E("ngModelChange",function(n){p(e);let c=l().$implicit;return y(c.Comentario,n)||(c.Comentario=n),m(n)}),o()(),r(7,"button",30),f("click",function(){p(e);let n=l().$implicit,c=l();return m(c.ingresarCalificacion(n.Comentario,n.paciente))}),s(8," Guardar Calificaci\xF3n "),o(),r(9,"button",31),f("click",function(){p(e);let n=l().$implicit,c=l();return m(c.ocultarFormularioCalificar(n))}),s(10,"Cancelar"),o()()}if(a&2){let e=l().$implicit;d(6),S("ngModel",e.Comentario)}}function Se(a,t){if(a&1&&(r(0,"li",6),x(1,he,7,5,"div",7)(2,be,19,3,"div",8)(3,Ce,11,1,"div",8)(4,ve,11,1,"div",8),o()),a&2){let e=t.$implicit,i=l();d(),u("ngIf",e.paciente===i.usuarioActual),d(),u("ngIf",e.mostrarFormularioEncuesta),d(),u("ngIf",e.mostrarFormularioCancelar),d(),u("ngIf",e.mostrarFormularioCalificar)}}function ye(a,t){a&1&&(r(0,"div",33)(1,"strong"),s(2,"\xA1Atenci\xF3n!"),o(),s(3," No tienes turnos disponibles. "),o())}var B=class a{constructor(t,e,i){this.turnos=t;this.userService=e;this.auth=i;this.dataNombres()}searchText="";nombresEspecialistasArray=[];nombresFiltrados=[];especialidadSeleccionada="";especialista={};turnosDisponibles=[];turnoSeleccionado="";mensajeExito=!1;usuarioActual;getEstadoTurno(t){switch(t){case"aceptado":return"Turno Confirmado";case"pendiente":return"Esperando Confirmaci\xF3n";case"historiaClinica":return"En Espera de Historia Cl\xEDnica";case"cancelado":return"Turno Cancelado";case"eliminado":return"Turno Eliminado";case"finalizar":return"Registrando Historia CLinica";case"FINALIZADO":return"Turno Finalizado";default:return"Estado Desconocido"}}ingresarEncuesta(t,e,i,n,c,_){console.log(c),this.turnos.ingresarEncuestaPaciente(t,e,i,n,c),this.ocultarFormularioEncuesta(_),this.cambiarEstado("FINALIZADO",_)}encuesta=!1;ingresarCalificacion(t,e){this.encuesta=!0,this.turnos.ingresarComentarioPaciente(t,e)}ingresarMensajePaciente(t,e,i){this.encuesta=!0,console.log(e),this.turnos.ingresarEstado("cancelado",e,i),this.turnos.ingresarMensajePaciente(t,e,i)}ocultarFormularioEncuesta(t){t.mostrarFormularioEncuesta=!1}ocultarFormularioCalificar(t){t.mostrarFormularioCalificar=!1}mostrarFormularioEncuesta(t){this.nombresEspecialistasArray.forEach(e=>{e.mostrarFormularioEncuesta=!1}),t.mostrarFormularioEncuesta=!0}calificar=!1;mostrarFormularioCalificar(t){this.calificar=!0,this.nombresEspecialistasArray.forEach(e=>{e.mostrarFormularioCalificar=!1}),t.mostrarFormularioCalificar=!0}dataNombres(){this.auth.onAuthStateChanged(t=>{this.usuarioActual=t?.email,this.turnos.getTurnos().subscribe({next:e=>{this.nombresEspecialistasArray=e.filter(i=>i.paciente===this.usuarioActual).map(i=>({paciente:i.paciente,especialista:i.especialista,especialidad:i.especialidad,horario:i.horario,estado:i.estado,mensaje:i.mensaje,doctor:i.emailEspecialsita,comentarioPaciente:i.comentarioPaciente})),this.nombresFiltrados=[...this.nombresEspecialistasArray],console.log(this.nombresEspecialistasArray)},error:e=>{console.error("Error al obtener los turnos:",e)}})})}aplicarFiltro(){this.nombresFiltrados=this.nombresEspecialistasArray.filter(t=>(this.especialidadSeleccionada?t.especialidad.toLowerCase().includes(this.especialidadSeleccionada.toLowerCase()):!0)&&(this.especialista?t.especialista.toLowerCase().includes(this.especialista.toLowerCase()):!0))}cambiarEstado(t,e){this.turnos.ingresarEstado(t,e.paciente,e.horario)}mostrarFormularioCancelar(t){this.nombresEspecialistasArray.forEach(e=>{e.mostrarFormularioCancelar=!1}),t.mostrarFormularioCancelar=!0}static \u0275fac=function(e){return new(e||a)(b(z),b(N),b(j))};static \u0275cmp=M({type:a,selectors:[["app-misturnos"]],standalone:!0,features:[P],decls:8,vars:6,consts:[[1,"container"],[1,"title"],["type","text","placeholder","Buscar turnos o historia cl\xEDnica...",1,"search-box",3,"ngModelChange","ngModel"],[1,"turnos-list"],["class","turno-item",4,"ngFor","ngForOf"],["class","alert",4,"ngIf"],[1,"turno-item"],["class","turno-content",4,"ngIf"],["class","mt-3 p-3 bg-light border rounded",4,"ngIf"],[1,"turno-content"],[4,"ngIf"],[1,"turno-actions"],["class","btn cancel-btn",3,"click",4,"ngIf"],["class","btn pending-btn",3,"click",4,"ngIf"],["class","turno-info",4,"ngIf"],[1,"turno-title"],[1,"turno-details"],[1,"btn","cancel-btn",3,"click"],[1,"btn","pending-btn",3,"click"],[1,"turno-info"],[1,"turno-label"],[1,"mt-3","p-3","bg-light","border","rounded"],[1,"text-secondary"],[1,"mb-3"],["for","alturaInput",1,"form-label"],["type","number","id","alturaInput",1,"form-control",3,"ngModelChange","ngModel"],["for","pesoInput",1,"form-label"],["type","number","id","pesoInput",1,"form-control",3,"ngModelChange","ngModel"],["for","temperaturaInput",1,"form-label"],["type","number","id","temperaturaInput",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"btn","btn-secondary","btn-sm","ms-2",3,"click"],["type","text","id","alturaInput",1,"form-control",3,"ngModelChange","ngModel"],[1,"alert"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"h1",1),s(2,"Buscar Turnos"),o(),r(3,"input",2),E("ngModelChange",function(c){return y(i.searchText,c)||(i.searchText=c),c}),o(),r(4,"ul",3),x(5,Se,5,4,"li",4),I(6,"filter"),o(),x(7,ye,4,0,"div",5),o()),e&2&&(d(3),S("ngModel",i.searchText),d(2),u("ngForOf",k(6,3,i.nombresEspecialistasArray,i.searchText)),d(2),u("ngIf",i.nombresEspecialistasArray.length===0))},dependencies:[T,D,A,$,K,ee,Q,X,ie],styles:['@charset "UTF-8";.tarjetas[_ngcontent-%COMP%]{margin-top:50px;background-color:#fff}.container[_ngcontent-%COMP%]{height:100vh;max-width:800px;margin:0 auto;padding:20px;font-family:Arial,sans-serif}.title[_ngcontent-%COMP%]{font-size:24px;color:#2c3e50;text-align:center;margin-bottom:20px}.search-box[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:16px;border:1px solid #ccc;border-radius:5px;margin-bottom:20px}.turnos-list[_ngcontent-%COMP%]{list-style:none;padding:0}.turno-item[_ngcontent-%COMP%]{height:auto;background:#f8f9fa;border:1px solid #ddd;border-radius:5px;padding:15px;margin-bottom:15px;box-shadow:0 2px 4px #0000001a}.turno-actions[_ngcontent-%COMP%]{height:auto}.turno-content[_ngcontent-%COMP%]{height:auto;display:flex;flex-direction:column}.turno-title[_ngcontent-%COMP%]{font-size:18px;color:#3498db;margin-bottom:5px}.turno-details[_ngcontent-%COMP%]{font-size:14px;color:#555;margin-bottom:10px}.btn[_ngcontent-%COMP%]{padding:10px 15px;font-size:14px;border:none;border-radius:5px;cursor:pointer}.cancel-btn[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff}.cancel-btn[_ngcontent-%COMP%]:hover{background-color:#c0392b}.pending-btn[_ngcontent-%COMP%]{background-color:#3498db;color:#fff}.pending-btn[_ngcontent-%COMP%]:disabled{background-color:#95a5a6;cursor:not-allowed}.turno-info[_ngcontent-%COMP%]{margin-top:10px}.turno-label[_ngcontent-%COMP%]{display:block;font-size:14px;color:#7f8c8d}.alert[_ngcontent-%COMP%]{background-color:#fef7e0;color:#b78e28;border:1px solid #f9e5b3;padding:10px;border-radius:5px;text-align:center}']})};var R=ce(se());function Ee(a,t){if(a&1){let e=g();r(0,"div",12)(1,"div",13),f("click",function(){let n=p(e).$implicit,c=l(2);return m(c.seleccionarEspecialista(n))}),r(2,"div",14)(3,"h6"),s(4),o()()()()}if(a&2){let e=t.$implicit;d(),O("background-image","url("+e.imagen+")"),d(3),h(e.nombre)}}function Me(a,t){if(a&1){let e=g();r(0,"div",8),x(1,Ee,5,3,"div",9),r(2,"div",10)(3,"button",11),f("click",function(){p(e);let n=l();return m(n.volverhome())}),s(4,"Volver"),o()()()}if(a&2){let e=l();d(),u("ngForOf",e.nombresEspecialistasArray)}}function we(a,t){if(a&1){let e=g();r(0,"div",17)(1,"p"),s(2),o(),r(3,"div",18),f("click",function(){p(e);let n=l().$implicit,c=l(2);return m(c.seleccionarEspecialidad(n.especialidad2))}),o()()}if(a&2){let e=l().$implicit;d(2),h(e.especialidad2),d(),O("background-image","url("+e.imgurl2+")")}}function Pe(a,t){if(a&1){let e=g();r(0,"div",16)(1,"div",17)(2,"p"),s(3),o(),r(4,"div",18),f("click",function(){let n=p(e).$implicit,c=l(2);return m(c.seleccionarEspecialidad(n.especialidad1))}),o()(),x(5,we,4,3,"div",19),o()}if(a&2){let e=t.$implicit;d(3),h(e.especialidad1),d(),O("background-image","url("+e.imgurl1+")"),d(),u("ngIf",e.especialidad2!="No especificada")}}function Te(a,t){if(a&1&&(r(0,"div",8),x(1,Pe,6,4,"div",15),o()),a&2){let e=l();d(),u("ngForOf",e.imagenesEspecilistasArray)}}function Ie(a,t){if(a&1){let e=g();r(0,"div",20)(1,"h3",21),s(2,"\xA1Turno Seleccionado!"),o(),r(3,"p"),s(4,"Profesional: "),r(5,"strong"),s(6),o()(),r(7,"p"),s(8,"Especialidad: "),r(9,"strong"),s(10),o()(),r(11,"p"),s(12,"Fecha y Hora: "),r(13,"strong"),s(14),o()(),r(15,"p"),s(16,"Dia: "),r(17,"strong"),s(18),I(19,"date"),o()(),r(20,"button",22),f("click",function(){p(e);let n=l();return m(n.confirmarturno())}),s(21,"Solicitar Turno"),o()()}if(a&2){let e=l();d(6),h(e.especialista.nombre),d(4),h(e.especialidadSeleccionada),d(4),h(e.turnoSeleccionado),d(4),h(k(19,4,e.fechaSeleccionada,"dd/MM/yyyy"))}}function ke(a,t){if(a&1){let e=g();r(0,"div",23)(1,"h3"),s(2,"Selecciona una Fecha"),o(),r(3,"div",24)(4,"button",25),f("click",function(){p(e);let n=l();return m(n.cambiarFecha(-1))}),s(5,"\u2190"),o(),C(6,"div",26),r(7,"button",25),f("click",function(){p(e);let n=l();return m(n.cambiarFecha(1))}),s(8,"\u2192"),o()()()}}function Fe(a,t){if(a&1){let e=g();r(0,"div",29)(1,"button",30),f("click",function(){let n=p(e).$implicit,c=l(2);return m(c.seleccionarTurno(n))}),r(2,"span"),s(3),I(4,"date"),o(),s(5),o()()}if(a&2){let e=t.$implicit,i=l(2);d(3),h(k(4,2,i.fechaSeleccionada,"dd/MM/yyyy")),d(2),w(" ",e," ")}}function Ve(a,t){if(a&1&&(r(0,"div")(1,"div",27),x(2,Fe,6,5,"div",28),o()()),a&2){let e=l();d(2),u("ngForOf",e.turnosDisponibles)}}var H=class a{constructor(t,e,i,n,c){this.turnos=t;this.userService=e;this.router=i;this.auth=n;this.captchaService=c;this.auth.onAuthStateChanged(_=>{_&&(this.user=_.email)}),this.captchaSubscription=this.captchaService.captchaEnabled$.subscribe(_=>{this.disableCaptcha=!_})}captchaValid=!1;disableCaptcha=!1;captchaSubscription;fechaSeleccionada=new Date;nombresEspecialistasArray=[];nombresFiltrados=[];nombresEspecialistasArrayPacientes=[];selectedEspecialidad="";especialidadSeleccionada="";especialidades=[];especialista={};turnosDisponibles=[];turnoSeleccionado="";mensajeExito=!1;imagenesEspecilistasArray=[];usuarioActual="";eleccion=!1;eleccion2=!1;especialistasEmail="";fechaMaxima=new Date;user;captchaEnabled;captchaCode="";userInput="";captchaVerified=null;generateCaptcha(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";this.captchaCode=Array.from({length:6},()=>t.charAt(Math.floor(Math.random()*t.length))).join(""),this.userInput="",this.captchaVerified=null}verifyCaptcha(){this.captchaVerified=this.userInput===this.captchaCode,this.captchaVerified?(this.captchaValid=!0,this.habilitado=!0):this.captchaValid=!1}handleCaptchaValidation(t){this.captchaValid=t}irArriba(){window.scrollTo({top:0,behavior:"smooth"})}habilitado=!1;onCaptchaValidation(t){t?(this.habilitado=!0,console.log("CAPTCHA v\xE1lido, puedes continuar")):console.log("CAPTCHA inv\xE1lido, por favor intenta de nuevo")}obtenerTurnosDisponibles(){this.especialidadSeleccionada&&this.fechaSeleccionada&&(this.turnosDisponibles=["09:00 AM","10:00 AM","11:00 AM"])}cambiarFecha(t){let e=new Date(this.fechaSeleccionada);e.setDate(e.getDate()+t),e<=this.fechaMaxima&&e>=new Date&&(this.fechaSeleccionada=e,this.generarTurnosDisponibles())}captchaVisible=!1;ngOnInit(){this.usuarioActual=this.userService.getUser(),this.dataNombres(),this.calcularFechaMaxima(),this.captchaService.captchaEnabled$.subscribe(t=>{this.captchaEnabled=t,console.log("Captcha habilitado:",this.captchaEnabled),this.captchaVisible=!0})}calcularFechaMaxima(){let t=new Date;t.setDate(t.getDate()+15),this.fechaMaxima=t}dataNombres(){this.turnos.getEspecialistas().subscribe(t=>{this.nombresEspecialistasArray=t.map(e=>({nombre:e.nombre,apellido:e.apellido,horario:e.horario,email:e.email,imagen:e.imagen,especialidades:Object.keys(e.especialista).filter(i=>e.especialista[i])})),this.especialidades=[...new Set(this.nombresEspecialistasArray.flatMap(e=>e.especialidades))]})}nombrePaciente="";dataNombresPaciente(t){return new Promise((e,i)=>{this.turnos.getUsers().subscribe(n=>{let c=n.find(_=>_.email===t);c?(this.nombrePaciente=`${c.nombre} ${c.apellido}`,e()):(console.warn("No se encontr\xF3 un paciente con el email especificado."),this.nombrePaciente="Paciente no encontrado",i(new Error("Paciente no encontrado")))},n=>{console.error("Error al obtener los datos del paciente",n),i(n)})})}dataImagenes(){this.turnos.getImagenesEspecialdiad().subscribe(t=>{this.imagenesEspecilistasArray=t.filter(e=>e.usuario===this.especialistasEmail).map(e=>({usuario:e.usuario,especialidad1:e.especialidad1,especialidad2:e.especialidad2,imgurl1:e.imgurl1,imgurl2:e.imgurl2})),console.log(this.especialistasEmail)})}seleccionarEspecialista(t){this.eleccion=!0,this.eleccion2=!0,this.especialista=t,this.especialistasEmail=t.email,this.generarTurnosDisponibles(),this.dataImagenes()}generarTurnosDisponibles(){let t=this.especialista.horario.split("/"),e=parseInt(t[0]),i=parseInt(t[1]),n=20,c=[],_=e,v=0;for(;_<i||_===i&&v===0;){let re=_<10?`0${_}`:`${_}`,ae=v<10?`0${v}`:`${v}`;c.push(`${re}:${ae}`),v+=n,v>=60&&(v=0,_++)}this.turnosDisponibles=c}seleccionarTurno(t){this.irArriba();let[e,i]=t.split(":"),n=new Date;if(n.setHours(parseInt(e)),n.setMinutes(parseInt(i)),n>this.fechaMaxima){alert("No se puede seleccionar un turno m\xE1s all\xE1 de 15 d\xEDas de anticipaci\xF3n.");return}this.turnoSeleccionado=t}turnoValido=!1;confirmarturno(){return U(this,null,function*(){let t=this.fechaSeleccionada,e=`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()}`;try{(yield this.validarturno(this.turnoSeleccionado,e))?(yield this.dataNombresPaciente(this.user),this.turnos.sendturno(this.user,`${this.especialista.nombre} ${this.especialista.apellido}`,this.especialidadSeleccionada,this.turnoSeleccionado,this.especialista.email,e,this.nombrePaciente),this.mensajeExito=!0,setTimeout(()=>{this.mensajeExito=!1,R.default.fire({title:"\xC9xito!",text:"El turno fue solicitado.",icon:"success",confirmButtonText:"Aceptar"}),this.turnos.sendlogTurnoMedico(`${this.especialista.nombre} ${this.especialista.apellido}`),this.turnos.sendLogTurnosPorDia(),this.turnos.sendLogEspecialidad(this.especialidadSeleccionada),this.router.navigate(["/turnoPaciente"])},2e3)):R.default.fire({title:"Error!",text:"El turno ya est\xE1 reservado.",icon:"error",confirmButtonText:"Intentar de nuevo"})}catch(i){console.log("Error al confirmar el turno:",i),R.default.fire({title:"Error!",text:"Hubo un problema al confirmar el turno.",icon:"error",confirmButtonText:"Intentar de nuevo"})}})}validarturno(t,e){return U(this,null,function*(){return new Promise((i,n)=>{this.turnos.getTurnos().subscribe(c=>{for(let _ of c)if(_.horario===t&&_.dia===e){console.log("El turno ya est\xE1 reservado."),i(!1);return}console.log("El turno est\xE1 disponible."),i(!0)},c=>{n(c)})})})}sumarDias(t,e){let i=new Date(t);return i.setDate(i.getDate()+e),i}volverhome(){this.router.navigate(["/turnoPaciente"])}volver(){this.eleccion=!1}seleccionarEspecialidad(t){this.especialidadSeleccionada=t,this.eleccion2=!1}static \u0275fac=function(e){return new(e||a)(b(z),b(N),b(J),b(j),b(te))};static \u0275cmp=M({type:a,selectors:[["app-solicitarturno"]],standalone:!0,features:[P],decls:12,vars:5,consts:[[1,"wrapper"],[1,"custom-container"],[1,"text-center","mb-5"],[1,"lead-title"],["class","custom-row",4,"ngIf"],["class","text-resultado mt-5",4,"ngIf"],["class","text-center",4,"ngIf"],[4,"ngIf"],[1,"custom-row"],["class","card-wrapper",4,"ngFor","ngForOf"],[1,"text-center","mt-3"],[1,"custom-btn",3,"click"],[1,"card-wrapper"],[1,"custom-card",3,"click"],[1,"card-overlay"],["class","especialidad-wrapper",4,"ngFor","ngForOf"],[1,"especialidad-wrapper"],[1,"especialidades-card"],[1,"customes-card",3,"click"],["class","especialidades-card",4,"ngIf"],[1,"text-resultado","mt-5"],[1,"text-success"],[1,"custom-btn-confirm",3,"click"],[1,"text-center"],[1,"d-flex","justify-content-center","align-items-center"],[1,"btn","custom-btn",3,"click"],[1,"mx-3"],[1,"row","justify-content-center"],["class","col-12 col-sm-6 col-md-4 col-lg-3 mb-4",4,"ngFor","ngForOf"],[1,"col-12","col-sm-6","col-md-4","col-lg-3","mb-4"],[1,"btn","custom-btn","w-100",3,"click"]],template:function(e,i){e&1&&(r(0,"section",0)(1,"div",1)(2,"div",2)(3,"p",3),s(4,"Solicitar Nuevo Turno"),o()(),x(5,Me,5,1,"div",4)(6,Te,2,1,"div",4)(7,Ie,22,7,"div",5),C(8,"br")(9,"br"),x(10,ke,9,0,"div",6)(11,Ve,3,1,"div",7),o()()),e&2&&(d(5),u("ngIf",!i.eleccion),d(),u("ngIf",i.eleccion2),d(),u("ngIf",i.turnoSeleccionado),d(3),u("ngIf",i.especialidadSeleccionada&&!i.turnoSeleccionado),d(),u("ngIf",i.especialidadSeleccionada&&i.turnosDisponibles.length>0))},dependencies:[T,D,A,Y,$],styles:['@charset "UTF-8";.custom-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;padding:20px}.lead-title[_ngcontent-%COMP%]{background-color:#fff;width:fit-content;padding:10px 20px;font-size:24px;font-weight:700;color:#007bff;text-align:center;border-radius:10px;box-shadow:0 4px 6px #0000001a;margin-bottom:20px;text-transform:uppercase;letter-spacing:1px;transition:transform .2s ease,box-shadow .2s ease}.custom-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:20px;background-color:#fff;border-radius:10px;padding:20px;margin-bottom:20px;box-shadow:0 4px 8px #0000001a}.card-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}.custom-card[_ngcontent-%COMP%], .especialidad-card[_ngcontent-%COMP%]{width:200px;height:200px;background-size:cover;background-position:center;border-radius:10px;position:relative;box-shadow:0 4px 8px #0000001a}.especialidad-wrapper[_ngcontent-%COMP%]{width:100%;max-width:1200px;min-height:250px;margin:20px auto;background-color:#f8f9fa;border:2px solid #007bff;border-radius:10px;box-shadow:0 4px 8px #0000001a;display:flex;justify-content:center;align-items:center;gap:20px;padding:20px}.especialidades-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-between;width:850px;height:250px;background-color:#fff;border-radius:10px;box-shadow:0 4px 8px #0000001a;padding:10px;text-align:center}.customes-card[_ngcontent-%COMP%]{width:100%;height:500px;background-size:cover;background-position:center;border-radius:10px;cursor:pointer;transition:transform .3s ease}.card-overlay[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;background-color:#00000080;color:#fff;padding:10px;text-align:center;font-size:14px;font-weight:700;border-radius:0 0 10px 10px}h3[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{font-family:Arial,sans-serif;font-weight:700;color:#fff;margin-bottom:20px}.d-flex[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.mx-3[_ngcontent-%COMP%]{margin-left:1rem;margin-right:1rem}.custom-btn[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:10px 15px;font-size:18px;font-weight:700;border-radius:5px;transition:background-color .3s ease,transform .2s ease;cursor:pointer}.custom-btn[_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:scale(1.05)}.custom-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.row[_ngcontent-%COMP%]{margin:0;gap:10px}.col-12[_ngcontent-%COMP%], .col-sm-6[_ngcontent-%COMP%], .col-md-4[_ngcontent-%COMP%], .col-lg-3[_ngcontent-%COMP%]{padding:10px}.mb-4[_ngcontent-%COMP%]{margin-bottom:1.5rem}.w-100[_ngcontent-%COMP%]{width:100%}.text-info[_ngcontent-%COMP%]{color:#f30f0f}span[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#333}.text-center[_ngcontent-%COMP%]{text-align:center}.mt-5[_ngcontent-%COMP%]{margin-top:3rem}.text-resultado[_ngcontent-%COMP%]{background-color:#fff;width:500px;height:auto;border-radius:15px}.text-success[_ngcontent-%COMP%]{font-family:Arial,sans-serif;font-weight:700;color:#28a745;margin-bottom:20px;font-size:24px}p[_ngcontent-%COMP%]{font-size:18px;font-family:Arial,sans-serif;color:#333;margin:10px 0}p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#007bff;font-weight:700}.custom-btn-confirm[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;border:none;padding:10px 20px;font-size:18px;font-weight:700;border-radius:5px;margin-top:20px;cursor:pointer;transition:background-color .3s ease,transform .2s ease}.custom-btn-confirm[_ngcontent-%COMP%]:hover{background-color:#218838;transform:scale(1.05)}.custom-btn-confirm[_ngcontent-%COMP%]:active{transform:scale(.95)}.container-centered[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:#f5f5f5;padding:20px}.text-resultado[_ngcontent-%COMP%]{background-color:#fff;width:500px;padding:20px;height:auto;border-radius:15px;box-shadow:0 4px 8px #0000001a;text-align:center}']})};var Oe=[{path:"detalleturnoPaciente",component:L},{path:"misturnos",component:B},{path:"solicitarturno",component:H}],q=class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=V({type:a});static \u0275inj=F({imports:[Z.forChild(Oe),Z]})};var oe=class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=V({type:a});static \u0275inj=F({imports:[T,q]})};export{oe as TurnosPacientesModule};
